<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DayEdge v5 — Login</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Barlow+Condensed:wght@700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#080c10;--panel:#0d1117;--border:#1a2332;--border2:#1e3a5f;
  --green:#00ff88;--gglow:rgba(0,255,136,.12);--red:#ff4466;
  --t:#c9d1d9;--tdim:#586069;--tbright:#e6edf3;
  --mono:'Share Tech Mono',monospace;--disp:'Barlow Condensed',sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:var(--bg);color:var(--t);font-family:var(--mono);
  min-height:100vh;display:flex;align-items:center;justify-content:center;
  overflow:hidden;
}
body::before{
  content:'';position:fixed;inset:0;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.04) 2px,rgba(0,0,0,.04) 4px);
  pointer-events:none;z-index:0;
}

/* animated background grid */
.bg-grid{
  position:fixed;inset:0;z-index:0;
  background-image:
    linear-gradient(rgba(0,255,136,.03) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,255,136,.03) 1px,transparent 1px);
  background-size:60px 60px;
  animation:grid-scroll 20s linear infinite;
}
@keyframes grid-scroll{to{background-position:60px 60px;}}

.login-wrap{
  position:relative;z-index:1;
  width:100%;max-width:400px;padding:1.5rem;
}

/* logo */
.logo{display:flex;align-items:center;gap:14px;justify-content:center;margin-bottom:2.5rem}
.logo-icon{
  width:48px;height:48px;border:2px solid var(--green);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 20px var(--gglow),0 0 40px rgba(0,255,136,.06);
  animation:icon-pulse 3s ease infinite;
}
@keyframes icon-pulse{0%,100%{box-shadow:0 0 20px var(--gglow)}50%{box-shadow:0 0 30px rgba(0,255,136,.25)}}
.logo-icon::before{content:'▲';color:var(--green);font-size:18px}
.logo-text{font-family:var(--disp);font-size:2.2rem;font-weight:800;color:var(--tbright);letter-spacing:.05em}
.logo-text span{color:var(--green)}

/* card */
.card{
  background:var(--panel);border:1px solid var(--border2);
  padding:2.5rem;position:relative;overflow:hidden;
}
.card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,var(--green),transparent);
  animation:scan 3s ease infinite;
}
@keyframes scan{0%,100%{opacity:.4}50%{opacity:1}}

.card-title{
  font-size:.65rem;color:var(--tdim);letter-spacing:.25em;
  text-transform:uppercase;text-align:center;margin-bottom:2rem;
}

.field{display:flex;flex-direction:column;gap:.45rem;margin-bottom:1.2rem}
.field label{font-size:.58rem;color:var(--tdim);letter-spacing:.18em;text-transform:uppercase}
.field input{
  background:var(--bg);border:1px solid var(--border2);
  color:var(--tbright);font-family:var(--mono);font-size:.95rem;
  padding:.85rem 1rem;outline:none;
  transition:border-color .2s,box-shadow .2s;width:100%;
  letter-spacing:.05em;
}
.field input:focus{
  border-color:var(--green);
  box-shadow:0 0 0 2px rgba(0,255,136,.08);
}
.field input::placeholder{color:var(--tdim);font-size:.78rem}

.login-btn{
  width:100%;background:var(--green);color:var(--bg);border:none;
  font-family:var(--mono);font-size:.75rem;font-weight:700;
  letter-spacing:.2em;text-transform:uppercase;
  padding:1rem;cursor:pointer;margin-top:.5rem;
  transition:all .2s;position:relative;overflow:hidden;
}
.login-btn:hover{opacity:.9;box-shadow:0 0 20px var(--gglow)}
.login-btn:disabled{opacity:.5;cursor:not-allowed}
.login-btn.loading::after{
  content:'';position:absolute;left:-100%;top:0;width:100%;height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);
  animation:shimmer 1s infinite;
}
@keyframes shimmer{to{left:100%}}

.error-msg{
  display:none;background:rgba(255,68,102,.07);
  border:1px solid rgba(255,68,102,.3);
  padding:.75rem 1rem;margin-bottom:1rem;
  font-size:.7rem;color:var(--red);text-align:center;
  letter-spacing:.05em;
}
.error-msg.show{display:block}

.footer-note{
  text-align:center;margin-top:1.5rem;
  font-size:.6rem;color:var(--tdim);letter-spacing:.08em;line-height:1.8;
}
.footer-note span{color:var(--green)}

/* corner decorations */
.corner{position:absolute;width:12px;height:12px;border-color:var(--border2);border-style:solid}
.tl{top:0;left:0;border-width:1px 0 0 1px}
.tr{top:0;right:0;border-width:1px 1px 0 0}
.bl{bottom:0;left:0;border-width:0 0 1px 1px}
.br{bottom:0;right:0;border-width:0 1px 1px 0}
</style>
</head>
<body>
<div class="bg-grid"></div>

<div class="login-wrap">
  <div class="logo">
    <div class="logo-icon"></div>
    <div class="logo-text">Day<span>Edge</span></div>
  </div>

  <div class="card">
    <div class="corner tl"></div>
    <div class="corner tr"></div>
    <div class="corner bl"></div>
    <div class="corner br"></div>

    <div class="card-title">// Secure Access — Enter Credentials</div>

    <div class="error-msg" id="errMsg"></div>

    <div class="field">
      <label>Username</label>
      <input type="text" id="username" placeholder="Enter username"
        autocomplete="username" autocapitalize="none" spellcheck="false"
        onkeydown="if(event.key==='Enter')doLogin()"/>
    </div>

    <div class="field">
      <label>Password</label>
      <input type="password" id="password" placeholder="Enter password"
        autocomplete="current-password"
        onkeydown="if(event.key==='Enter')doLogin()"/>
    </div>

    <button class="login-btn" id="loginBtn" onclick="doLogin()">
      ACCESS DASHBOARD →
    </button>

    <div class="footer-note">
      DayEdge v5 · Stock Scanner & Trading Dashboard<br>
      <span>Authorized users only</span>
    </div>
  </div>
</div>

<script>
async function doLogin(){
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;
  const btn      = document.getElementById('loginBtn');
  const err      = document.getElementById('errMsg');

  if(!username || !password){
    showError('Please enter both username and password.');
    return;
  }

  btn.disabled = true;
  btn.classList.add('loading');
  btn.textContent = 'AUTHENTICATING...';
  err.classList.remove('show');

  try{
    const r = await fetch('/api/login', {
      method:  'POST',
      headers: {'Content-Type':'application/json'},
      body:    JSON.stringify({username, password})
    });
    const d = await r.json();

    if(!r.ok || d.error){
      showError(d.error || 'Login failed. Please try again.');
      btn.disabled = false;
      btn.classList.remove('loading');
      btn.textContent = 'ACCESS DASHBOARD →';
      return;
    }

    // Success — redirect to dashboard
    btn.textContent = '✓ ACCESS GRANTED';
    btn.style.background = 'var(--green)';
    setTimeout(() => window.location.href = '/', 600);

  }catch(e){
    showError('Connection error. Please try again.');
    btn.disabled = false;
    btn.classList.remove('loading');
    btn.textContent = 'ACCESS DASHBOARD →';
  }
}

function showError(msg){
  const el = document.getElementById('errMsg');
  el.textContent = '⚠ ' + msg;
  el.classList.add('show');
}

// Auto-focus username
document.getElementById('username').focus();
</script>
</body>
</html>
